{"version":3,"sources":["node_modules/browser-pack/_prelude.js","sources/js/main.js","sources/js/modules/popup.js"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Popup from './modules/popup';\r\nconst popups = {};\r\n\r\n$(function () {\r\n\r\n    $('.js-slider').slick({\r\n        infinite: true,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        prevArrow: '<div class=\"slick-arrow slick-prev\"></div>',\r\n        nextArrow: '<div class=\"slick-arrow slick-next\"></div>'\r\n    });\r\n\r\n    $(window).scroll(function () {\r\n        var $menu = $('.header');\r\n\r\n        if ($(this).scrollTop() > 200 && $menu.hasClass(\"header__top\")) {\r\n            $menu.fadeOut('fast', function () {\r\n                $(this).removeClass(' header__top ')\r\n                    .addClass(\"fixed\")\r\n                    .fadeIn('fast');\r\n            });\r\n        } else if ($(this).scrollTop() <= 1 && $menu.hasClass(\"fixed\")) {\r\n            $menu.fadeOut('fast', function () {\r\n                $(this).removeClass(\"fixed\")\r\n                    .addClass(\"header__top\")\r\n                    .fadeIn('fast');\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    var options = {\r\n        id: 61042406,\r\n        loop: true\r\n    };\r\n    //\r\n\r\n    let video = $(\"#video\");\r\n    let playBtn = $('.play');\r\n    if (video.length) {\r\n        var player = new Vimeo.Player(video, options);\r\n    }\r\n\r\n\r\n    playBtn.on('click', function (e) {\r\n        e.preventDefault();\r\n        let preview = $(this).parent('.preview'),\r\n            video = preview.siblings('.video__vimeohttps');\r\n\r\n        if (preview) {\r\n            preview.addClass('hide');\r\n            video.removeClass('hide').addClass('show');\r\n\r\n            player.play();\r\n            e.preventDefault();\r\n        }\r\n    });\r\n\r\n\r\n    //ToDO Переделать в полноценный модуль\r\n\r\n    let tab = {\r\n        $openBtn: $('.js-open-tab'),\r\n        $tabParent: $('.js-open-tab h3'),\r\n\r\n        open(target, index){\r\n\r\n            if (target == 'next') {\r\n\r\n                if (index >= this.lengthBlocks) {\r\n                    this.$tabParent.eq(0).addClass('open');\r\n                } else {\r\n                    this.$tabParent.eq(index).addClass('open');\r\n                }\r\n            } else {\r\n                target.closest('.js-open-tab').addClass('open');\r\n            }\r\n        },\r\n\r\n        close(){\r\n            this.$openBtn.removeClass('open');\r\n        },\r\n\r\n        controller(){\r\n            let that = this;\r\n            that.$openBtn.on('click', function (e) {\r\n                if (e.target.tagName == 'H3' || e.target.tagName == 'SPAN') {\r\n\r\n                    if($(this).hasClass('doctor__wrap')) {\r\n                        let doctorId = $(this).attr('data-doctor-id');\r\n\r\n                        $.ajax({\r\n                            url: 'doctor-info.json',\r\n                            // type: form.attr('method'),\r\n                            // url: form.attr('action'),\r\n                            // dataType: 'json',\r\n                            // data: data,\r\n\r\n                            success: function (data) {\r\n                                console.log(data);\r\n\r\n                                function parseArr (arr) {\r\n\r\n                                    if(Array.isArray(arr)) {\r\n                                        for(let i = 0; i < arr.length; i++) {\r\n                                            var specTr = (specTr ? specTr : '') + '' + arr[i];\r\n                                        }\r\n                                        return specTr;\r\n                                    } else {\r\n                                        return arr;\r\n                                    }\r\n                                }\r\n\r\n                                let certif = data.certificates;\r\n\r\n                                for(let i = 0; i < certif.length; i++) {\r\n                                    console.log(certif[i].text);\r\n                                    var certifHtml = certifHtml + '<li><span>' + certif[i].text + '</span><img src=\"' + certif[i].icon + '\" alt=\"\"><img class=\"img_big\" src=\"' + certif[i].image + '\" alt=\"\"></li>'\r\n                                }\r\n\r\n                                let doctorInfo = '<div class=\"doctor__content_title\">' +\r\n                                    '<span>Фамильный Доктор Сергеевич</span>' +\r\n                                    '</div>' +\r\n                                    '<div class=\"doctor__content_left\">' +\r\n                                    '<div class=\"doctor__content_foto\">' +\r\n                                    '<img src=\"/img/doctor-1.png\" alt=\"\"></div>' +\r\n                                    '</div>' +\r\n                                    '<div class=\"doctor__content_right\">' +\r\n                                    '<table><tbody>' +\r\n                                    '<tr><th>Отделение</th><td>' + data.department + '</td></tr>'+\r\n                                    '<tr><th>Специализация:</th><td>' + parseArr(data.specialization); + '</td></tr>'\r\n                                    '<tr><th>Учёная степень:</th><td>' + parseArr(data.department); + '</td></tr>' +\r\n                                    '<tr><th>Образование:</th><td>' + parseArr(data.education); + '</td></tr>' +\r\n                                    '<tr><th>Врачебный стаж:</th><td>' + parseArr(data.worktime); + '</td></tr>' +\r\n                                    '<tr><th>Языки консультаций:</th><td>' + parseArr(data.languages); + '</td></tr>' +\r\n                                    '<tr><th>Сертификаты:</th><td>' +\r\n                                    '<ul>' + certifHtml + '</ul></td></tr>' +\r\n                                    '<tr><th>Публикации:</th><td>' + parseArr(data.publications); + '</td></tr>' +\r\n                                    '<tr><th>Дополнительные сведения:</th><td>' + parseArr(data.other); + '</td></tr>' +\r\n                                    '</tbody></table></div>'\r\n\r\n                                let containerDoctorInfo = $('.doctor__content');\r\n                                containerDoctorInfo.html(doctorInfo);\r\n                            },\r\n                            error: function (error) {\r\n                                console.log(error);\r\n                            }\r\n                        });\r\n                    }\r\n\r\n\r\n                    let checkContent = $(this).children('.doctor__content'),\r\n                        checkParagraf = $(this).children('p');\r\n\r\n                    if (checkContent.length || checkParagraf.length) {\r\n                        if ($(this).hasClass('open')) {\r\n                            console.log('sad');\r\n                            $(this).removeClass('open');\r\n                        } else {\r\n                            let currentIndex = that.$tabParent.index(parent);\r\n                            if (that.$tabParent.hasClass('open')) {\r\n                                that.close();\r\n                                that.open('next', ++currentIndex);\r\n                            } else {\r\n                                that.close();\r\n                                that.open($(this));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n            });\r\n        },\r\n\r\n        init(){\r\n            this.controller();\r\n        }\r\n    };\r\n    tab.init();\r\n\r\n\r\n\r\n\r\n    $('.popup__back').on('click', () => {\r\n\r\n        let $body = $('body');\r\n        if ($body.find('.popup').filter('.show').length == '1') {\r\n            $body.find('.popup').filter('.show').removeClass('show');\r\n            $body.find('.popup__back').filter('.show').removeClass('show');\r\n            $(this).removeClass('show');\r\n        } else {\r\n            $body.find('.popup').filter('.show').last().removeClass('show');\r\n        }\r\n    });\r\n\r\n    let loginPopup = new Popup({\r\n        backSelector: '.popup__back',\r\n        popupsSelector: '.popup',\r\n        popupSelector: '.popup_login',\r\n        popupActiveClass: 'show',\r\n        backActiveClass: 'show',\r\n        closeButtonsSelector: '.popup__close-button, .js-bad-answer-close'\r\n        // customOpen: function ($elem) {\r\n        // \tthis.$popup.find('.popup__text_good-answer').text($elem);\r\n        // \tthis.openPopup();\r\n        // }\r\n    });\r\n    popups.loginPopup = loginPopup;\r\n\r\n    $('.js-login').on('click', function (e) {\r\n        e.preventDefault();\r\n        popups.loginPopup.openPopup();\r\n    });\r\n\r\n\r\n    $('select').on('change', function (e) {\r\n\r\n        var form = $(this.form);\r\n        var formId = form.attr('id');\r\n        var formType = form.data('form-type');\r\n        var data = form.serialize();\r\n        var container = $('.container');\r\n        var countryWrap = container.find('.counrty__wrap');\r\n\r\n\r\n        if (formType == \"ajax\") {\r\n\r\n\r\n            $.ajax({\r\n                url: 'doctor.json',\r\n                // type: form.attr('method'),\r\n                // url: form.attr('action'),\r\n                // dataType: 'json',\r\n                // data: data,\r\n\r\n                success: function (data) {\r\n                    countryWrap.html('');\r\n\r\n                    data.forEach(function (el) {\r\n                        var clinicClass = '',\r\n                            clinicArr,\r\n                            doctorsHtml = '',\r\n                            priceContainerHtml = '',\r\n                            priceHtml = '';\r\n\r\n                        if (formId == 'filterDoctor') {\r\n                            clinicClass = 'doctor';\r\n                            clinicArr = el.clinics;\r\n\r\n                            for (let i = 0; i < clinicArr.length; i++) {\r\n                                var doctorsArr = clinicArr[i].doctors;\r\n                                for (let k = 0; k < doctorsArr.length; k++) {\r\n\r\n                                    doctorsHtml += '<div class=\"doctor__wrap js-open-tab\" data-doccor-id=\"' + doctorsArr[k].id + '\">' +\r\n                                        '<h3>' + doctorsArr[k].name + '</h3>' +\r\n                                        '</div>';\r\n                                }\r\n                            };\r\n                        }\r\n\r\n                        if (formId == 'filterClinic') {\r\n                            clinicClass = 'clinics';\r\n                            clinicArr = el.clinics;\r\n                        }\r\n\r\n\r\n                        if (formId == 'filterPrice') {\r\n                            clinicClass = 'price';\r\n                            clinicArr = el.clinics;\r\n\r\n                            for (let i = 0; i < clinicArr.length; i++) {\r\n                                priceHtml += '<div class=\"price__item\">' +\r\n                                    '<span class=\"price__prop\">Первичная консультация</span>' +\r\n                                    '<div class=\"price__dots\"></div>' +\r\n                                    '<span class=\"price__value\">' + clinicArr[i].cost + ' ' + el.currency + '</span> ' +\r\n                                    '</div>';\r\n\r\n                                priceContainerHtml = '<div class=\"price__list\"> ' + priceHtml + '</div>';\r\n                            };\r\n\r\n                        }\r\n\r\n\r\n                        for (let i = 0; i < clinicArr.length; i++) {\r\n                            var clinicItem = clinicArr[i];\r\n\r\n                            if (clinicClass == 'doctor') {\r\n                                clinicItem = clinicArr[i].clinic;\r\n                            }\r\n\r\n                            var clinicLogo = clinicItem.logo ? '<img src=' + clinicItem.logo + ' alt=\"\">' : '';\r\n                            var clinicsHtml ='<div class=\"' + clinicClass + '__clinic counrty__clinic\">' +\r\n                                '<div class=\"' + clinicClass + '__clinic_name counrty__clinic_name\">' +\r\n                                '<span>' + clinicItem.name + '</span>' +\r\n                                '<em>' + clinicItem.about + '</em>' + clinicLogo +\r\n                                '</div>' + (priceContainerHtml ? priceContainerHtml : '') + '</div>';\r\n\r\n                        }\r\n\r\n                        countryWrap.append('<div class=\"' + clinicClass + '__country counrty\">' +\r\n                            '<h3>' + el.country + '</h3>' + clinicsHtml + '' + (doctorsHtml ? doctorsHtml : '') + '</div>'\r\n                        );\r\n\r\n                    });\r\n                },\r\n                error: function (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n    $('.js-show-attention').on('click', function (e) {\r\n        e.preventDefault();\r\n        console.log();\r\n\r\n\r\n        let attentionBlock = $('.contacts__connection');\r\n        attentionBlock.toggleClass('hide');\r\n    });\r\n\r\n\r\n\r\n});","class Popup {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.$body = $('body');\r\n\t\tthis.$back = $(data.backSelector);\r\n\t\tthis.$popups = $(data.popupsSelector);\r\n\t\tthis.popupSelector = data.popupSelector;\r\n\t\tthis.$popup = this.$popups.filter(data.popupSelector);\r\n\t\tthis.popupActiveClass = data.popupActiveClass;\r\n\t\tthis.backActiveClass = data.backActiveClass;\r\n\t\tthis.closeButtonsSelector = data.closeButtonsSelector;\r\n\t\tthis.openButtonsSelector = data.openButtonsSelector;\r\n\t\tthis.isCloseAllWhenOpen = data.isCloseAllWhenOpen || true;\r\n\t\tthis.onResizeCallback = (typeof data.onResizeCallback == \"function\") ? data.onResizeCallback : '' ;\r\n\t\tthis.onCloseCallback = (typeof data.onCloseCallback == \"function\") ? data.onCloseCallback : '' ;\r\n\t\tthis.customOpen = (typeof data.customOpen == \"function\") ? data.customOpen : '' ;\r\n\r\n\t\tthis.addEventListners();\r\n\t}\r\n\r\n\taddEventListners ()  {\r\n\t\t$(this.openButtonsSelector).on('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.openPopup();\r\n\t\t});\r\n\t\tthis.$popup.on('click', this.closeButtonsSelector, () => {\r\n\t\t\tthis.closePopup();\r\n\t\t});\r\n\t\t$(window).on('resize', () => {\r\n\t\t\tthis.$popup.css('left', '0');\r\n\r\n\t\t\tif (this.$popup.hasClass(this.popupActiveClass)) {\r\n\r\n\t\t\t\tthis.getLeft();\r\n\t\t\t\tthis.getTop ();\r\n\r\n\t\t\t\tif (this.onResizeCallback) {\r\n\t\t\t\t\tthis.onResizeCallback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\topenPopup () {\r\n\t\tthis.$popup.css('top', '-20px');\r\n\t\tthis.showBack();\r\n\t\tthis.getLeft();\r\n\t\tthis.getTop ();\r\n\t\tthis.$popup.addClass(this.popupActiveClass);\r\n\t}\r\n\r\n\r\n\tclosePopup() {\r\n\r\n\t\t// this.closeAll();\r\n\r\n\t\tthis.$popup.removeClass(this.popupActiveClass);\r\n\t\tif (!this.$popups.filter('.show').length) {\r\n\t\t\tthis.hideBack();\r\n\t\t}\r\n\r\n\t\tif (this.onCloseCallback) {\r\n\t\t\tthis.onCloseCallback();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcloseAll() {\r\n\t\tthis.$popups.removeClass(this.popupActiveClass);\r\n\t}\r\n\r\n\tshowBack () {\r\n\t\tthis.$back.addClass(this.backActiveClass);\r\n\t}\r\n\r\n\thideBack () {\r\n\t\tthis.$back.removeClass(this.backActiveClass);\r\n\t}\r\n\r\n\tgetLeft () {\r\n\t\tlet left = parseInt(this.$body.outerWidth()) / 2 - this.$popup.outerWidth() / 2;\r\n\t\tthis.$popup.css('left', `${left}px`);\r\n\t}\r\n\tgetTop () {\r\n\t\tlet top = this.$body.scrollTop() + 200;\r\n\t\t// let top = parseInt(this.$body.outerHeight()) / 2 - this.$popup.outerHeight() / 2;\r\n\t\tthis.$popup.css('top', `${top}px`);\r\n\t}\r\n}\r\n\r\nexport default Popup;\r\n\r\n\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2VzXFxqc1xcbWFpbi5qcyIsInNvdXJjZXNcXGpzXFxtb2R1bGVzXFxwb3B1cC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7OztBQUNBLElBQU0sU0FBUyxFQUFmOztBQUVBLEVBQUUsWUFBWTtBQUFBOztBQUVWLE1BQUUsWUFBRixFQUFnQixLQUFoQixDQUFzQjtBQUNsQixrQkFBVSxJQURRO0FBRWxCLHNCQUFjLENBRkk7QUFHbEIsd0JBQWdCLENBSEU7QUFJbEIsbUJBQVcsNENBSk87QUFLbEIsbUJBQVc7QUFMTyxLQUF0Qjs7QUFRQSxNQUFFLE1BQUYsRUFBVSxNQUFWLENBQWlCLFlBQVk7QUFDekIsWUFBSSxRQUFRLEVBQUUsU0FBRixDQUFaOztBQUVBLFlBQUksRUFBRSxJQUFGLEVBQVEsU0FBUixLQUFzQixHQUF0QixJQUE2QixNQUFNLFFBQU4sQ0FBZSxhQUFmLENBQWpDLEVBQWdFO0FBQzVELGtCQUFNLE9BQU4sQ0FBYyxNQUFkLEVBQXNCLFlBQVk7QUFDOUIsa0JBQUUsSUFBRixFQUFRLFdBQVIsQ0FBb0IsZUFBcEIsRUFDSyxRQURMLENBQ2MsT0FEZCxFQUVLLE1BRkwsQ0FFWSxNQUZaO0FBR0gsYUFKRDtBQUtILFNBTkQsTUFNTyxJQUFJLEVBQUUsSUFBRixFQUFRLFNBQVIsTUFBdUIsQ0FBdkIsSUFBNEIsTUFBTSxRQUFOLENBQWUsT0FBZixDQUFoQyxFQUF5RDtBQUM1RCxrQkFBTSxPQUFOLENBQWMsTUFBZCxFQUFzQixZQUFZO0FBQzlCLGtCQUFFLElBQUYsRUFBUSxXQUFSLENBQW9CLE9BQXBCLEVBQ0ssUUFETCxDQUNjLGFBRGQsRUFFSyxNQUZMLENBRVksTUFGWjtBQUdILGFBSkQ7QUFLSDtBQUVKLEtBakJEOztBQW1CQSxRQUFJLFVBQVU7QUFDVixZQUFJLFFBRE07QUFFVixjQUFNO0FBRkksS0FBZDtBQUlBOztBQUVB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Q1QsT0FBSSxNQUFNLEtBQUssS0FBTCxDQUFXLFNBQVgsS0FBeUIsR0FBbkM7QUFDQTtBQUNBLFFBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsS0FBaEIsRUFBMEIsR0FBMUI7QUFDQTs7Ozs7O2tCQUdhLEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vbW9kdWxlcy9wb3B1cCc7XHJcbmNvbnN0IHBvcHVwcyA9IHt9O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJCgnLmpzLXNsaWRlcicpLnNsaWNrKHtcclxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cInNsaWNrLWFycm93IHNsaWNrLXByZXZcIj48L2Rpdj4nLFxyXG4gICAgICAgIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1uZXh0XCI+PC9kaXY+J1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRtZW51ID0gJCgnLmhlYWRlcicpO1xyXG5cclxuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDIwMCAmJiAkbWVudS5oYXNDbGFzcyhcImhlYWRlcl9fdG9wXCIpKSB7XHJcbiAgICAgICAgICAgICRtZW51LmZhZGVPdXQoJ2Zhc3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCcgaGVhZGVyX190b3AgJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJmaXhlZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5mYWRlSW4oJ2Zhc3QnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpIDw9IDEgJiYgJG1lbnUuaGFzQ2xhc3MoXCJmaXhlZFwiKSkge1xyXG4gICAgICAgICAgICAkbWVudS5mYWRlT3V0KCdmYXN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImZpeGVkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaGVhZGVyX190b3BcIilcclxuICAgICAgICAgICAgICAgICAgICAuZmFkZUluKCdmYXN0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICBpZDogNjEwNDI0MDYsXHJcbiAgICAgICAgbG9vcDogdHJ1ZVxyXG4gICAgfTtcclxuICAgIC8vXHJcblxyXG4gICAgbGV0IHZpZGVvID0gJChcIiN2aWRlb1wiKTtcclxuICAgIGxldCBwbGF5QnRuID0gJCgnLnBsYXknKTtcclxuICAgIGlmICh2aWRlby5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgcGxheWVyID0gbmV3IFZpbWVvLlBsYXllcih2aWRlbywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHBsYXlCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHByZXZpZXcgPSAkKHRoaXMpLnBhcmVudCgnLnByZXZpZXcnKSxcclxuICAgICAgICAgICAgdmlkZW8gPSBwcmV2aWV3LnNpYmxpbmdzKCcudmlkZW9fX3ZpbWVvaHR0cHMnKTtcclxuXHJcbiAgICAgICAgaWYgKHByZXZpZXcpIHtcclxuICAgICAgICAgICAgcHJldmlldy5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB2aWRlby5yZW1vdmVDbGFzcygnaGlkZScpLmFkZENsYXNzKCdzaG93Jyk7XHJcblxyXG4gICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vVG9ETyDQn9C10YDQtdC00LXQu9Cw0YLRjCDQsiDQv9C+0LvQvdC+0YbQtdC90L3Ri9C5INC80L7QtNGD0LvRjFxyXG5cclxuICAgIGxldCB0YWIgPSB7XHJcbiAgICAgICAgJG9wZW5CdG46ICQoJy5qcy1vcGVuLXRhYicpLFxyXG4gICAgICAgICR0YWJQYXJlbnQ6ICQoJy5qcy1vcGVuLXRhYiBoMycpLFxyXG5cclxuICAgICAgICBvcGVuKHRhcmdldCwgaW5kZXgpe1xyXG5cclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PSAnbmV4dCcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGhCbG9ja3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0YWJQYXJlbnQuZXEoMCkuYWRkQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdGFiUGFyZW50LmVxKGluZGV4KS5hZGRDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5qcy1vcGVuLXRhYicpLmFkZENsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjbG9zZSgpe1xyXG4gICAgICAgICAgICB0aGlzLiRvcGVuQnRuLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY29udHJvbGxlcigpe1xyXG4gICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoYXQuJG9wZW5CdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdIMycgfHwgZS50YXJnZXQudGFnTmFtZSA9PSAnU1BBTicpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnZG9jdG9yX193cmFwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRvY3RvcklkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWRvY3Rvci1pZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2RvY3Rvci1pbmZvLmpzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHlwZTogZm9ybS5hdHRyKCdtZXRob2QnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVybDogZm9ybS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhOiBkYXRhLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQXJyIChhcnIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkoYXJyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGVjVHIgPSAoc3BlY1RyID8gc3BlY1RyIDogJycpICsgJycgKyBhcnJbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3BlY1RyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlcnRpZiA9IGRhdGEuY2VydGlmaWNhdGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2VydGlmLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNlcnRpZltpXS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlcnRpZkh0bWwgPSBjZXJ0aWZIdG1sICsgJzxsaT48c3Bhbj4nICsgY2VydGlmW2ldLnRleHQgKyAnPC9zcGFuPjxpbWcgc3JjPVwiJyArIGNlcnRpZltpXS5pY29uICsgJ1wiIGFsdD1cIlwiPjxpbWcgY2xhc3M9XCJpbWdfYmlnXCIgc3JjPVwiJyArIGNlcnRpZltpXS5pbWFnZSArICdcIiBhbHQ9XCJcIj48L2xpPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkb2N0b3JJbmZvID0gJzxkaXYgY2xhc3M9XCJkb2N0b3JfX2NvbnRlbnRfdGl0bGVcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuPtCk0LDQvNC40LvRjNC90YvQuSDQlNC+0LrRgtC+0YAg0KHQtdGA0LPQtdC10LLQuNGHPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZG9jdG9yX19jb250ZW50X2xlZnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkb2N0b3JfX2NvbnRlbnRfZm90b1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCIvaW1nL2RvY3Rvci0xLnBuZ1wiIGFsdD1cIlwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZG9jdG9yX19jb250ZW50X3JpZ2h0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGFibGU+PHRib2R5PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRyPjx0aD7QntGC0LTQtdC70LXQvdC40LU8L3RoPjx0ZD4nICsgZGF0YS5kZXBhcnRtZW50ICsgJzwvdGQ+PC90cj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRyPjx0aD7QodC/0LXRhtC40LDQu9C40LfQsNGG0LjRjzo8L3RoPjx0ZD4nICsgcGFyc2VBcnIoZGF0YS5zcGVjaWFsaXphdGlvbik7ICsgJzwvdGQ+PC90cj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dHI+PHRoPtCj0YfRkdC90LDRjyDRgdGC0LXQv9C10L3RjDo8L3RoPjx0ZD4nICsgcGFyc2VBcnIoZGF0YS5kZXBhcnRtZW50KTsgKyAnPC90ZD48L3RyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRyPjx0aD7QntCx0YDQsNC30L7QstCw0L3QuNC1OjwvdGg+PHRkPicgKyBwYXJzZUFycihkYXRhLmVkdWNhdGlvbik7ICsgJzwvdGQ+PC90cj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0cj48dGg+0JLRgNCw0YfQtdCx0L3Ri9C5INGB0YLQsNC2OjwvdGg+PHRkPicgKyBwYXJzZUFycihkYXRhLndvcmt0aW1lKTsgKyAnPC90ZD48L3RyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRyPjx0aD7Qr9C30YvQutC4INC60L7QvdGB0YPQu9GM0YLQsNGG0LjQuTo8L3RoPjx0ZD4nICsgcGFyc2VBcnIoZGF0YS5sYW5ndWFnZXMpOyArICc8L3RkPjwvdHI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dHI+PHRoPtCh0LXRgNGC0LjRhNC40LrQsNGC0Ys6PC90aD48dGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dWw+JyArIGNlcnRpZkh0bWwgKyAnPC91bD48L3RkPjwvdHI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dHI+PHRoPtCf0YPQsdC70LjQutCw0YbQuNC4OjwvdGg+PHRkPicgKyBwYXJzZUFycihkYXRhLnB1YmxpY2F0aW9ucyk7ICsgJzwvdGQ+PC90cj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0cj48dGg+0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvQtSDRgdCy0LXQtNC10L3QuNGPOjwvdGg+PHRkPicgKyBwYXJzZUFycihkYXRhLm90aGVyKTsgKyAnPC90ZD48L3RyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90Ym9keT48L3RhYmxlPjwvZGl2PidcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lckRvY3RvckluZm8gPSAkKCcuZG9jdG9yX19jb250ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyRG9jdG9ySW5mby5odG1sKGRvY3RvckluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGVja0NvbnRlbnQgPSAkKHRoaXMpLmNoaWxkcmVuKCcuZG9jdG9yX19jb250ZW50JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrUGFyYWdyYWYgPSAkKHRoaXMpLmNoaWxkcmVuKCdwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0NvbnRlbnQubGVuZ3RoIHx8IGNoZWNrUGFyYWdyYWYubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdvcGVuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXggPSB0aGF0LiR0YWJQYXJlbnQuaW5kZXgocGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LiR0YWJQYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wZW4oJ25leHQnLCArK2N1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wZW4oJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdCgpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGFiLmluaXQoKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAkKCcucG9wdXBfX2JhY2snKS5vbignY2xpY2snLCAoKSA9PiB7XHJcblxyXG4gICAgICAgIGxldCAkYm9keSA9ICQoJ2JvZHknKTtcclxuICAgICAgICBpZiAoJGJvZHkuZmluZCgnLnBvcHVwJykuZmlsdGVyKCcuc2hvdycpLmxlbmd0aCA9PSAnMScpIHtcclxuICAgICAgICAgICAgJGJvZHkuZmluZCgnLnBvcHVwJykuZmlsdGVyKCcuc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICRib2R5LmZpbmQoJy5wb3B1cF9fYmFjaycpLmZpbHRlcignLnNob3cnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGJvZHkuZmluZCgnLnBvcHVwJykuZmlsdGVyKCcuc2hvdycpLmxhc3QoKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBsb2dpblBvcHVwID0gbmV3IFBvcHVwKHtcclxuICAgICAgICBiYWNrU2VsZWN0b3I6ICcucG9wdXBfX2JhY2snLFxyXG4gICAgICAgIHBvcHVwc1NlbGVjdG9yOiAnLnBvcHVwJyxcclxuICAgICAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX2xvZ2luJyxcclxuICAgICAgICBwb3B1cEFjdGl2ZUNsYXNzOiAnc2hvdycsXHJcbiAgICAgICAgYmFja0FjdGl2ZUNsYXNzOiAnc2hvdycsXHJcbiAgICAgICAgY2xvc2VCdXR0b25zU2VsZWN0b3I6ICcucG9wdXBfX2Nsb3NlLWJ1dHRvbiwgLmpzLWJhZC1hbnN3ZXItY2xvc2UnXHJcbiAgICAgICAgLy8gY3VzdG9tT3BlbjogZnVuY3Rpb24gKCRlbGVtKSB7XHJcbiAgICAgICAgLy8gXHR0aGlzLiRwb3B1cC5maW5kKCcucG9wdXBfX3RleHRfZ29vZC1hbnN3ZXInKS50ZXh0KCRlbGVtKTtcclxuICAgICAgICAvLyBcdHRoaXMub3BlblBvcHVwKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSk7XHJcbiAgICBwb3B1cHMubG9naW5Qb3B1cCA9IGxvZ2luUG9wdXA7XHJcblxyXG4gICAgJCgnLmpzLWxvZ2luJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcG9wdXBzLmxvZ2luUG9wdXAub3BlblBvcHVwKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnc2VsZWN0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgIHZhciBmb3JtID0gJCh0aGlzLmZvcm0pO1xyXG4gICAgICAgIHZhciBmb3JtSWQgPSBmb3JtLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgdmFyIGZvcm1UeXBlID0gZm9ybS5kYXRhKCdmb3JtLXR5cGUnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IGZvcm0uc2VyaWFsaXplKCk7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9ICQoJy5jb250YWluZXInKTtcclxuICAgICAgICB2YXIgY291bnRyeVdyYXAgPSBjb250YWluZXIuZmluZCgnLmNvdW5ydHlfX3dyYXAnKTtcclxuXHJcblxyXG4gICAgICAgIGlmIChmb3JtVHlwZSA9PSBcImFqYXhcIikge1xyXG5cclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdkb2N0b3IuanNvbicsXHJcbiAgICAgICAgICAgICAgICAvLyB0eXBlOiBmb3JtLmF0dHIoJ21ldGhvZCcpLFxyXG4gICAgICAgICAgICAgICAgLy8gdXJsOiBmb3JtLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgLy8gZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIC8vIGRhdGE6IGRhdGEsXHJcblxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5V3JhcC5odG1sKCcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpbmljQ2xhc3MgPSAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaW5pY0FycixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3RvcnNIdG1sID0gJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUNvbnRhaW5lckh0bWwgPSAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlSHRtbCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1JZCA9PSAnZmlsdGVyRG9jdG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpbmljQ2xhc3MgPSAnZG9jdG9yJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaW5pY0FyciA9IGVsLmNsaW5pY3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGluaWNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9jdG9yc0FyciA9IGNsaW5pY0FycltpXS5kb2N0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZG9jdG9yc0Fyci5sZW5ndGg7IGsrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdG9yc0h0bWwgKz0gJzxkaXYgY2xhc3M9XCJkb2N0b3JfX3dyYXAganMtb3Blbi10YWJcIiBkYXRhLWRvY2Nvci1pZD1cIicgKyBkb2N0b3JzQXJyW2tdLmlkICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxoMz4nICsgZG9jdG9yc0FycltrXS5uYW1lICsgJzwvaDM+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybUlkID09ICdmaWx0ZXJDbGluaWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGluaWNDbGFzcyA9ICdjbGluaWNzJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaW5pY0FyciA9IGVsLmNsaW5pY3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybUlkID09ICdmaWx0ZXJQcmljZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaW5pY0NsYXNzID0gJ3ByaWNlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaW5pY0FyciA9IGVsLmNsaW5pY3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGluaWNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUh0bWwgKz0gJzxkaXYgY2xhc3M9XCJwcmljZV9faXRlbVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJwcmljZV9fcHJvcFwiPtCf0LXRgNCy0LjRh9C90LDRjyDQutC+0L3RgdGD0LvRjNGC0LDRhtC40Y88L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicHJpY2VfX2RvdHNcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicHJpY2VfX3ZhbHVlXCI+JyArIGNsaW5pY0FycltpXS5jb3N0ICsgJyAnICsgZWwuY3VycmVuY3kgKyAnPC9zcGFuPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlQ29udGFpbmVySHRtbCA9ICc8ZGl2IGNsYXNzPVwicHJpY2VfX2xpc3RcIj4gJyArIHByaWNlSHRtbCArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsaW5pY0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaW5pY0l0ZW0gPSBjbGluaWNBcnJbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaW5pY0NsYXNzID09ICdkb2N0b3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpbmljSXRlbSA9IGNsaW5pY0FycltpXS5jbGluaWM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaW5pY0xvZ28gPSBjbGluaWNJdGVtLmxvZ28gPyAnPGltZyBzcmM9JyArIGNsaW5pY0l0ZW0ubG9nbyArICcgYWx0PVwiXCI+JyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaW5pY3NIdG1sID0nPGRpdiBjbGFzcz1cIicgKyBjbGluaWNDbGFzcyArICdfX2NsaW5pYyBjb3VucnR5X19jbGluaWNcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIicgKyBjbGluaWNDbGFzcyArICdfX2NsaW5pY19uYW1lIGNvdW5ydHlfX2NsaW5pY19uYW1lXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuPicgKyBjbGluaWNJdGVtLm5hbWUgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZW0+JyArIGNsaW5pY0l0ZW0uYWJvdXQgKyAnPC9lbT4nICsgY2xpbmljTG9nbyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKyAocHJpY2VDb250YWluZXJIdG1sID8gcHJpY2VDb250YWluZXJIdG1sIDogJycpICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5V3JhcC5hcHBlbmQoJzxkaXYgY2xhc3M9XCInICsgY2xpbmljQ2xhc3MgKyAnX19jb3VudHJ5IGNvdW5ydHlcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aDM+JyArIGVsLmNvdW50cnkgKyAnPC9oMz4nICsgY2xpbmljc0h0bWwgKyAnJyArIChkb2N0b3JzSHRtbCA/IGRvY3RvcnNIdG1sIDogJycpICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5qcy1zaG93LWF0dGVudGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCk7XHJcblxyXG5cclxuICAgICAgICBsZXQgYXR0ZW50aW9uQmxvY2sgPSAkKCcuY29udGFjdHNfX2Nvbm5lY3Rpb24nKTtcclxuICAgICAgICBhdHRlbnRpb25CbG9jay50b2dnbGVDbGFzcygnaGlkZScpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pOyIsImNsYXNzIFBvcHVwIHtcclxuXHJcblx0Y29uc3RydWN0b3IoZGF0YSkge1xyXG5cdFx0dGhpcy4kYm9keSA9ICQoJ2JvZHknKTtcclxuXHRcdHRoaXMuJGJhY2sgPSAkKGRhdGEuYmFja1NlbGVjdG9yKTtcclxuXHRcdHRoaXMuJHBvcHVwcyA9ICQoZGF0YS5wb3B1cHNTZWxlY3Rvcik7XHJcblx0XHR0aGlzLnBvcHVwU2VsZWN0b3IgPSBkYXRhLnBvcHVwU2VsZWN0b3I7XHJcblx0XHR0aGlzLiRwb3B1cCA9IHRoaXMuJHBvcHVwcy5maWx0ZXIoZGF0YS5wb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMucG9wdXBBY3RpdmVDbGFzcyA9IGRhdGEucG9wdXBBY3RpdmVDbGFzcztcclxuXHRcdHRoaXMuYmFja0FjdGl2ZUNsYXNzID0gZGF0YS5iYWNrQWN0aXZlQ2xhc3M7XHJcblx0XHR0aGlzLmNsb3NlQnV0dG9uc1NlbGVjdG9yID0gZGF0YS5jbG9zZUJ1dHRvbnNTZWxlY3RvcjtcclxuXHRcdHRoaXMub3BlbkJ1dHRvbnNTZWxlY3RvciA9IGRhdGEub3BlbkJ1dHRvbnNTZWxlY3RvcjtcclxuXHRcdHRoaXMuaXNDbG9zZUFsbFdoZW5PcGVuID0gZGF0YS5pc0Nsb3NlQWxsV2hlbk9wZW4gfHwgdHJ1ZTtcclxuXHRcdHRoaXMub25SZXNpemVDYWxsYmFjayA9ICh0eXBlb2YgZGF0YS5vblJlc2l6ZUNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikgPyBkYXRhLm9uUmVzaXplQ2FsbGJhY2sgOiAnJyA7XHJcblx0XHR0aGlzLm9uQ2xvc2VDYWxsYmFjayA9ICh0eXBlb2YgZGF0YS5vbkNsb3NlQ2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKSA/IGRhdGEub25DbG9zZUNhbGxiYWNrIDogJycgO1xyXG5cdFx0dGhpcy5jdXN0b21PcGVuID0gKHR5cGVvZiBkYXRhLmN1c3RvbU9wZW4gPT0gXCJmdW5jdGlvblwiKSA/IGRhdGEuY3VzdG9tT3BlbiA6ICcnIDtcclxuXHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdG5lcnMoKTtcclxuXHR9XHJcblxyXG5cdGFkZEV2ZW50TGlzdG5lcnMgKCkgIHtcclxuXHRcdCQodGhpcy5vcGVuQnV0dG9uc1NlbGVjdG9yKS5vbignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMub3BlblBvcHVwKCk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuJHBvcHVwLm9uKCdjbGljaycsIHRoaXMuY2xvc2VCdXR0b25zU2VsZWN0b3IsICgpID0+IHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9KTtcclxuXHRcdCQod2luZG93KS5vbigncmVzaXplJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLiRwb3B1cC5jc3MoJ2xlZnQnLCAnMCcpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuJHBvcHVwLmhhc0NsYXNzKHRoaXMucG9wdXBBY3RpdmVDbGFzcykpIHtcclxuXHJcblx0XHRcdFx0dGhpcy5nZXRMZWZ0KCk7XHJcblx0XHRcdFx0dGhpcy5nZXRUb3AgKCk7XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLm9uUmVzaXplQ2FsbGJhY2spIHtcclxuXHRcdFx0XHRcdHRoaXMub25SZXNpemVDYWxsYmFjaygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRvcGVuUG9wdXAgKCkge1xyXG5cdFx0dGhpcy4kcG9wdXAuY3NzKCd0b3AnLCAnLTIwcHgnKTtcclxuXHRcdHRoaXMuc2hvd0JhY2soKTtcclxuXHRcdHRoaXMuZ2V0TGVmdCgpO1xyXG5cdFx0dGhpcy5nZXRUb3AgKCk7XHJcblx0XHR0aGlzLiRwb3B1cC5hZGRDbGFzcyh0aGlzLnBvcHVwQWN0aXZlQ2xhc3MpO1xyXG5cdH1cclxuXHJcblxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblxyXG5cdFx0Ly8gdGhpcy5jbG9zZUFsbCgpO1xyXG5cclxuXHRcdHRoaXMuJHBvcHVwLnJlbW92ZUNsYXNzKHRoaXMucG9wdXBBY3RpdmVDbGFzcyk7XHJcblx0XHRpZiAoIXRoaXMuJHBvcHVwcy5maWx0ZXIoJy5zaG93JykubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMuaGlkZUJhY2soKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5vbkNsb3NlQ2FsbGJhY2spIHtcclxuXHRcdFx0dGhpcy5vbkNsb3NlQ2FsbGJhY2soKTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRjbG9zZUFsbCgpIHtcclxuXHRcdHRoaXMuJHBvcHVwcy5yZW1vdmVDbGFzcyh0aGlzLnBvcHVwQWN0aXZlQ2xhc3MpO1xyXG5cdH1cclxuXHJcblx0c2hvd0JhY2sgKCkge1xyXG5cdFx0dGhpcy4kYmFjay5hZGRDbGFzcyh0aGlzLmJhY2tBY3RpdmVDbGFzcyk7XHJcblx0fVxyXG5cclxuXHRoaWRlQmFjayAoKSB7XHJcblx0XHR0aGlzLiRiYWNrLnJlbW92ZUNsYXNzKHRoaXMuYmFja0FjdGl2ZUNsYXNzKTtcclxuXHR9XHJcblxyXG5cdGdldExlZnQgKCkge1xyXG5cdFx0bGV0IGxlZnQgPSBwYXJzZUludCh0aGlzLiRib2R5Lm91dGVyV2lkdGgoKSkgLyAyIC0gdGhpcy4kcG9wdXAub3V0ZXJXaWR0aCgpIC8gMjtcclxuXHRcdHRoaXMuJHBvcHVwLmNzcygnbGVmdCcsIGAke2xlZnR9cHhgKTtcclxuXHR9XHJcblx0Z2V0VG9wICgpIHtcclxuXHRcdGxldCB0b3AgPSB0aGlzLiRib2R5LnNjcm9sbFRvcCgpICsgMjAwO1xyXG5cdFx0Ly8gbGV0IHRvcCA9IHBhcnNlSW50KHRoaXMuJGJvZHkub3V0ZXJIZWlnaHQoKSkgLyAyIC0gdGhpcy4kcG9wdXAub3V0ZXJIZWlnaHQoKSAvIDI7XHJcblx0XHR0aGlzLiRwb3B1cC5jc3MoJ3RvcCcsIGAke3RvcH1weGApO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcblxyXG5cclxuIl19"}